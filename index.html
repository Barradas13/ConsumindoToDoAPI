<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo List App Avançado</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Todo List App</h1>
            <p>Organize suas tarefas com cores, ícones e arraste-as!</p>
        </div>

        <!-- Seção de Autenticação -->
        <div id="authSection" class="auth-section">
            <!-- Login Form -->
            <div id="loginForm">
                <h2>Login</h2>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="loginEmail" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="loginSenha" placeholder="Sua senha">
                </div>
                <button onclick="authController.login()">Entrar</button>
                <button class="secondary" onclick="authController.mostrarRegistro()">Criar nova conta</button>
            </div>

            <!-- Registro Form -->
            <div id="registroForm" class="hidden">
                <h2>Registrar</h2>
                <div class="form-group">
                    <label>Nome</label>
                    <input type="text" id="regNome" placeholder="Seu nome completo">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="regEmail" placeholder="seu@email.com">
                </div>
                <div class="form-group">
                    <label>Senha</label>
                    <input type="password" id="regSenha" placeholder="Mínimo 6 caracteres">
                </div>
                <button class="success" onclick="authController.registrar()">Criar Conta</button>
                <button class="secondary" onclick="authController.mostrarLogin()">Voltar</button>
            </div>
        </div>

        <!-- Seção de Tarefas -->
        <div id="tarefasSection" class="tarefas-section hidden">
            <!-- Info do Usuário -->
            <div class="user-info">
                <div><strong id="userName"></strong> - <span id="userEmail"></span></div>
                <button class="danger" onclick="authController.logout()">Sair</button>
            </div>

            <!-- Nova Tarefa -->
            <div class="form-group">
                <h3>Nova Tarefa</h3>
                <input type="text" id="novaTarefaNome" placeholder="Título da tarefa">
                <textarea id="novaTarefaDesc" placeholder="Descrição (opcional)" rows="2"></textarea>
                <div class="nova-tarefa-controls">
                    <label><input type="checkbox" id="novaTarefaImportante"> Importante</label>
                    <input type="date" id="novaTarefaPrazo">
                    <button class="success" onclick="tarefasController.criarTarefa()">Adicionar</button>
                </div>
            </div>

            <!-- Filtros -->
            <div class="filtros">
                <select id="filtroStatus">
                    <option value="">Todos</option>
                    <option value="AFAZER">A Fazer</option>
                    <option value="FAZENDO">Fazendo</option>
                    <option value="FEITO">Concluída</option>
                </select>
                <select id="filtroImportante">
                    <option value="">Todos</option>
                    <option value="true">Importantes</option>
                    <option value="false">Normais</option>
                </select>
                <button onclick="tarefasController.carregarTarefas()">Filtrar</button>
            </div>

            <!-- Lista de Tarefas -->
            <div id="listaTarefas" class="lista-tarefas"></div>
        </div>
    </div>

    <!-- Modal de Edição -->
    <div id="editModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Editar Tarefa</h3>
                <button type="button" class="close" aria-label="Fechar">&times;</button>
            </div>
            <div id="editForm">
                <div class="form-group">
                    <label for="editNome">Título</label>
                    <input type="text" id="editNome" placeholder="Título da tarefa">
                </div>
                <div class="form-group">
                    <label for="editDescricao">Descrição</label>
                    <textarea id="editDescricao" rows="3" placeholder="Descrição da tarefa"></textarea>
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="editImportante"> 
                        Tarefa importante
                    </label>
                </div>
                <div class="form-group">
                    <label for="editStatus">Status</label>
                    <select id="editStatus">
                        <option value="AFAZER">A Fazer</option>
                        <option value="FAZENDO">Fazendo</option>
                        <option value="FEITO">Concluída</option>
                    </select>
                </div>
                <div class="acoes">
                    <button type="button" class="secondary" onclick="tarefasController.fecharModal()">Cancelar</button>
                    <button type="button" class="success" onclick="tarefasController.salvarEdicao()">Salvar Alterações</button>
                </div>
            </div>
        </div>
    </div>    
    <!-- Scripts -->
    <script src="js/config.js"></script>
    <script src="js/apiService.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/authController.js"></script>
    <script src="js/tarefasController.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
